# 格式

## 9.1. 行长度

1. 每一行代码字符数不超过 80.
2. 注释行可以超过 80 个字符, 这样可以方便复制粘贴.
3. 包含长路径的 #include 语句可以超出80列.
4. 头文件保护 可以无视该原则.

## 9.2. 非 ASCII 字符

1. 尽量不使用非 ASCII 字符, 使用时必须使用 UTF-8 编码

## 9.3. 空格还是制表位

1. 只使用空格, 每次缩进 2 个空格

## 9.4. 函数声明与定义

1. 返回类型和函数名在同一行, 参数也尽量放在同一行, 如果放不下就对形参分行, 分行方式与函数调用一致

    ```cpp
    ReturnType ClassName::ReallyLongFunctionName(Type par_name1, Type par_name2,
                                                Type par_name3) {
    DoSomething();
    ...
    }
    ```

    ```cpp
    ReturnType LongClassName::ReallyReallyReallyLongFunctionName(
        Type par_name1,  // 4 space indent
        Type par_name2,
        Type par_name3) {
    DoSomething();  // 2 space indent
    ...
    }
    ```

2. 左圆括号总是和函数名在同一行.
3. 函数名和左圆括号间永远没有空格.
4. 圆括号与参数间没有空格
5. 右圆括号和左大括号间总是有一个空格
6. 左大括号总在最后一个参数同一行的末尾处, 不另起新行
7. 未被使用的参数, 或者根据上下文很容易看出其用途的参数, 可以省略参数名；用途不明显的话, 在函数定义处将参数名注释起来

## 9.5. Lambda 表达式

1. 若用引用捕获, 在变量名和 & 之间不留空格.
2. 短 lambda 就写得和内联函数一样

## 9.6. 函数调用

## 9.7. 列表初始化格式

## 9.8. 条件语句

1. 倾向于不在圆括号内使用空格. 关键字 if 和 else 另起一行.
2. 所有情况下 if 和左圆括号间都有个空格. 右圆括号和左大括号之间也要有个空格
3. 但如果语句中某个 if-else 分支使用了大括号的话, 其它分支也必须使用

## 9.9. 循环和开关选择语句

1. 空循环体应使用 {} 或 continue, 而不是一个简单的分号

## 9.10. 指针和引用表达式

1. 句点或箭头前后不要有空格
2. 指针/地址操作符 (*, &) 之后不能有空格

## 9.11. 布尔表达式

## 9.12. 函数返回值

## 9.13. 变量及数组初始化

1. 列表初始化不允许整型类型的四舍五入, 这可以用来避免一些类型上的编程失误

## 9.14. 预处理指令

1. 预处理指令不要缩进, 从行首开始.
2. 即使预处理指令位于缩进代码块中, 指令也应从行首开始.

## 9.15. 类格式

1. 访问控制块的声明依次序是 public:, protected:, private:, 每个都缩进 1 个空格.
2. 除第一个关键词 (一般是 public) 外, 其他关键词前要空一行. 如果类比较小的话也可以不空

## 9.16. 构造函数初始值列表

构造函数初始化列表放在同一行或按四格缩进并排多行

```cpp
// 如果所有变量能放在同一行:
MyClass::MyClass(int var) : some_var_(var) {
  DoSomething();
}

// 如果不能放在同一行,
// 必须置于冒号后, 并缩进 4 个空格
MyClass::MyClass(int var)
    : some_var_(var), some_other_var_(var + 1) {
  DoSomething();
}

// 如果初始化列表需要置于多行, 将每一个成员放在单独的一行
// 并逐行对齐
MyClass::MyClass(int var)
    : some_var_(var),             // 4 space indent
      some_other_var_(var + 1) {  // lined up
  DoSomething();
}

// 右大括号 } 可以和左大括号 { 放在同一行
// 如果这样做合适的话
MyClass::MyClass(int var)
    : some_var_(var) {}
```

## 9.17. 命名空间格式化

命名空间内容不缩进.

```cpp
namespace {

void foo() {  // 正确. 命名空间内没有额外的缩进.
  ...
}

}  // namespace
```

## 9.19. 水平留白

```cpp
void f(bool b) {  // 左大括号前总是有空格.
}
int i = 0;  // 分号前不加空格.
// 列表初始化中大括号内的空格是可选的.
// 如果加了空格, 那么两边都要加上;
int x[] = { 0 };
int x[] = {0};

// 继承与初始化列表中的冒号前后恒有空格.
class Foo : public Bar {
 public:
  // 对于单行函数的实现, 在大括号内加上空格
  // 然后是函数实现
  Foo(int b) : Bar(), baz_(b) {}  // 大括号里面是空的话, 不加空格.
  void Reset() { baz_ = 0; }  // 用括号把大括号与实现分开.
}
```

## 9.19. 垂直留白

垂直留白越少越好
